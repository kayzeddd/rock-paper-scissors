<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Project: Rock Paper Scissors</title>
</head>
<body>
    <script>
        promptRounds()

        function promptRounds() {
            let rounds = prompt("How many rounds of ROCK-PAPER-SCISSORS?");
            if(rounds == null){
                return
            }
            if (!(Number(rounds) == rounds)) {
                alert("Enter a number!");
                return promptRounds()
            }
            if (rounds < 1){
                console.log("Number of games needs to be more than 0!");
                return promptRounds();
            }
            numberOfGames(+rounds)
        }

        function getComputerChoice(){
            let random = Math.floor(Math.random() * 3);
            if (random === 0) {
                return "ROCK";
                }
                else if (random === 1) {
                    return "PAPER"
                }
                else if (random ===2) {
                    return "SCISSORS"
                }
            }
        
        function play(computer, player){
            if (computer === player) {
                return "tie"
            }
            else if (computer === "ROCK") {
                return (player === "PAPER") ? "playerwin" : "computerwin" 
            }
            else if (computer === "PAPER") {
                return (player === "SCISSORS") ? "playerwin" : "computerwin" 
            }
            else if (computer === "SCISSORS") {
                return (player === "ROCK") ? "playerwin" : "computerwin" 
            }
        }
        
        function numberOfGames(n){

            var playerScore = 0;
            var computerScore = 0;

            for (let i = 1; i <=n ; i++) {
            let computerSelection = getComputerChoice();
            let playerPrompt =  prompt(`ROUND ${i}: ROCK? | PAPER? | SCISSORS?`);
            if (playerPrompt == null) {
                return
            }
            let playerSelection = playerPrompt.toUpperCase();
            if (playerSelection != "ROCK" && playerSelection != "SCISSORS" && playerSelection != "PAPER" ) {
                alert("You did not enter ROCK or PAPER or SCISSORS!");
                i -= 1
            }
            else {
                var roundWon = play(computerSelection, playerSelection);
                if (roundWon === "playerwin" ) {
                    playerScore += 1 ;
                    console.log(`PLAYER = ${playerScore} | COMPUTER = ${computerScore}`)
                }
                else if (roundWon === "computerwin") {
                    computerScore += 1;
                    console.log(`PLAYER = ${playerScore} | COMPUTER = ${computerScore}`)
                }
                else if (roundWon ==="tie") {
                    console.log("TIE!")
                }
                
            }
            }

            if (playerScore > computerScore) {
                alert("PLAYER WINS!");
                return(playAgain())
                }
            else if (playerScore < computerScore) {
                alert("COMPUTER WINS!");
                return (playAgain())
            }
            else if (playerScore == computerScore) {
                alert("NO ONE WINS!");
                return playAgain()
            }
        }
        
        function playAgain() {
            let ask = confirm("Play Again?");
            if (ask == true){
                promptRounds()
            }
            else {
                return
            }
        }
        


    </script>
</body>
</html>